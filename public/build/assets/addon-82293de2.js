function o(s,t,e,n,r,d,c,m){var i=typeof s=="function"?s.options:s;t&&(i.render=t,i.staticRenderFns=e,i._compiled=!0),n&&(i.functional=!0),d&&(i._scopeId="data-v-"+d);var l;if(c?(l=function(a){a=a||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!a&&typeof __VUE_SSR_CONTEXT__<"u"&&(a=__VUE_SSR_CONTEXT__),r&&r.call(this,a),a&&a._registeredComponents&&a._registeredComponents.add(c)},i._ssrRegister=l):r&&(l=m?function(){r.call(this,(i.functional?this.parent:this).$root.$options.shadowRoot)}:r),l)if(i.functional){i._injectStyles=l;var h=i.render;i.render=function(p,u){return l.call(u),h(p,u)}}else{var _=i.beforeCreate;i.beforeCreate=_?[].concat(_,l):[l]}return{exports:s,options:i}}const v={props:{initialValues:{type:Object,default:()=>({id:null,name:"",redirect:""})}},data(){return{values:this.initialValues,errors:{}}},methods:{save(){const s=this.values.id?"put":"post",t=this.values.id?`/passport/clients/${this.values.id}`:"/passport/clients";this.$axios[s](t,this.values).then(e=>{this.$toast.success(this.values.id?__("Client updated successfully"):__("Client created successfully")),this.$emit("saved")}).catch(e=>{this.$toast.error(e.response.data.message),this.errors=e.response.data.errors})}}};var f=function(){var t=this,e=t._self._c;return e("div",[e("modal",{attrs:{name:"passport-client-form"}},[e("header",{staticClass:"text-lg font-semibold px-5 py-3 bg-gray-200 rounded-t-lg flex items-center justify-between border-b"},[t._v(" "+t._s(t.values.id?t.__("Edit Client"):t.__("Create Client"))+" ")]),e("div",{staticClass:"publish-fields p-2"},[e("div",{staticClass:"form-group w-full"},[e("label",{domProps:{textContent:t._s(t.__("Name"))}}),e("div",{staticClass:"flex items-center"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.values.name,expression:"values.name"}],staticClass:"input-text",attrs:{type:"text"},domProps:{value:t.values.name},on:{input:function(n){n.target.composing||t.$set(t.values,"name",n.target.value)}}})]),t.errors.name?e("small",{staticClass:"help-block text-red-500 mt-2 mb-0",domProps:{textContent:t._s(t.errors.name[0])}}):t._e()]),e("div",{staticClass:"form-group w-full"},[e("label",{domProps:{textContent:t._s(t.__("Redirect URL"))}}),e("div",{staticClass:"flex items-center"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.values.redirect,expression:"values.redirect"}],staticClass:"input-text",attrs:{type:"url"},domProps:{value:t.values.redirect},on:{input:function(n){n.target.composing||t.$set(t.values,"redirect",n.target.value)}}})]),t.errors.redirect?e("small",{staticClass:"help-block text-red-500 mt-2 mb-0",domProps:{textContent:t._s(t.errors.redirect[0])}}):t._e()])]),e("div",{staticClass:"px-5 py-3 bg-gray-200 rounded-b-lg border-t flex items-center justify-end text-sm"},[e("button",{staticClass:"text-gray hover:text-gray-900",on:{click:function(n){return t.$emit("closed")}}},[t._v(t._s(t.__("Cancel")))]),e("button",{staticClass:"ml-4 btn-primary",on:{click:t.save}},[t._v(t._s(t.__("Save")))])])])],1)},C=[],g=o(v,f,C,!1,null,null,null,null);const b=g.exports,x={components:{Form:b},data(){return{initializing:!0,loading:!0,clients:[],showClient:!1,clientValues:void 0}},mounted(){this.loadClients()},methods:{loadClients(){this.loading=!0,this.$axios.get("/passport/clients").then(s=>{this.clients=s.data,this.loading=!1,this.initializing=!1}).catch(s=>{this.$toast.error(s.response?s.response.data.message:__("Something went wrong"),{duration:null})})},deleteClient(s){this.$axios.delete(`/passport/clients/${s.id}`).then(t=>{this.loadClients()}).catch(t=>{this.$toast.error(t.response?t.response.data.message:__("Something went wrong"),{duration:null})})},createClient(){this.showClient=!0},editClient(s){this.clientValues={id:s.id,name:s.name,redirect:s.redirect},this.showClient=!0},closeClient(){this.clientValues=void 0,this.showClient=!1,this.loadClients()}}};var $=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"flex items-end justify-between mb-4"},[e("h2",[t._v("Clients")]),e("button",{staticClass:"btn btn-sm btn-primary px-3",on:{click:t.createClient}},[t._v("Create Client")])]),e("div",{staticClass:"card p-0"},[t.initializing?e("div",{staticClass:"flex items-center justify-center text-center py-16"},[e("loading-graphic",{attrs:{inline:!0}})],1):t._e(),t.clients.length?t._e():e("div",{staticClass:"flex items-center justify-center text-center py-16 text-gray-700"},[t._v(" "+t._s(t.__("No clients"))+" ")]),!t.initializing&&t.clients.length?e("table",{staticClass:"data-table"},[t._m(0),e("tbody",t._l(t.clients,function(n){return e("tr",{key:n.id},[e("td",[t._v(" "+t._s(n.name)+" ")]),e("td",[t._v(" "+t._s(n.id)+" ")]),e("td",[t._v(" "+t._s(n.secret)+" ")]),e("td",[e("dropdown-list",[e("dropdown-item",{attrs:{text:t.__("Edit")},on:{click:function(r){return t.editClient(n)}}}),e("dropdown-item",{staticClass:"warning",attrs:{text:t.__("Delete")},on:{click:function(r){return t.deleteClient(n)}}})],1)],1)])}),0)]):t._e()]),t.showClient?e("Form",{attrs:{"initial-values":t.clientValues},on:{saved:t.closeClient,closed:t.closeClient}}):t._e()],1)},y=[function(){var s=this,t=s._self._c;return t("thead",[t("tr",[t("th",[s._v("Name")]),t("th",[s._v("ID")]),t("th",[s._v("Secret")]),t("th")])])}],w=o(x,$,y,!1,null,null,null,null);const k=w.exports,S={data(){return{initializing:!0,loading:!0,tokens:[]}},mounted(){this.loadTokens()},methods:{loadTokens(){this.loading=!0,this.$axios.get("/passport/tokens").then(s=>{this.tokens=s.data,this.loading=!1,this.initializing=!1}).catch(s=>{this.$toast.error(s.response?s.response.data.message:__("Something went wrong"),{duration:null})})},deleteToken(s){this.$axios.delete(`/passport/tokens/${s.id}`).then(t=>{this.loadTokens()}).catch(t=>{this.$toast.error(t.response?t.response.data.message:__("Something went wrong"),{duration:null})})}}};var T=function(){var t=this,e=t._self._c;return e("div",[t._m(0),e("div",{staticClass:"card p-0"},[t.initializing?e("div",{staticClass:"flex items-center justify-center text-center py-16"},[e("loading-graphic",{attrs:{inline:!0}})],1):t._e(),t.tokens.length?t._e():e("div",{staticClass:"flex items-center justify-center text-center py-16 text-gray-700"},[t._v(" "+t._s(t.__("No tokens"))+" ")]),!t.initializing&&t.tokens.length?e("table",{staticClass:"data-table"},[t._m(1),e("tbody",t._l(t.tokens,function(n){return e("tr",{key:n.id},[e("td",[t._v(" "+t._s(n.name)+" ")]),e("td",[t._v(" "+t._s(n.id)+" ")]),e("td",[e("dropdown-list",[e("dropdown-item",{staticClass:"warning",attrs:{text:t.__("Delete")},on:{click:function(r){return t.deleteToken(n)}}})],1)],1)])}),0)]):t._e()])])},R=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"flex items-end justify-between mb-4"},[t("h2",[s._v("Tokens")])])},function(){var s=this,t=s._self._c;return t("thead",[t("tr",[t("th",[s._v("Name")]),t("th",[s._v("ID")]),t("th")])])}],z=o(S,T,R,!1,null,null,null,null);const N=z.exports;Statamic.booting(()=>{Statamic.component("passport-client-listing",k),Statamic.component("passport-token-listing",N)});
